# ğŸš€ æ‹¯æ•‘æ··ä¹±çš„ä»£ç ç”Ÿæˆï¼šæ‰“é€ å¯æ§ã€é£æ ¼ç»Ÿä¸€çš„å¤šå±‚å·¥ä½œæµç³»ç»Ÿ

ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼ŒAIä»£ç ç”Ÿæˆå·²ç»ä»å°é²œèµ°å‘ç”Ÿäº§ã€‚ä½†å¾ˆå¤šå¼€å‘è€…å‘ç°ï¼Œç›´æ¥ä½¿ç”¨å¤§æ¨¡å‹ç”Ÿæˆä»£ç ï¼Œåè€Œå¸¦æ¥äº†ä¸€ç³»åˆ—æ–°çš„é—®é¢˜ï¼š

- âŒ ç”Ÿæˆä»£ç é£æ ¼ä¸ä¸€è‡´ï¼Œéš¾ä»¥èå…¥é¡¹ç›®
- âŒ ä¸Šä¸‹æ–‡ç†è§£ä¸åˆ°ä½ï¼Œæ¨¡å‹â€œä¸çŸ¥é“â€ä½ è¦ä»€ä¹ˆ
- âŒ ç”Ÿæˆå†…å®¹å¤ªå¤šã€ç»“æ„å¤ªæ‚ï¼Œå®¹æ˜“ token çˆ†ç‚¸ã€é€»è¾‘æ··ä¹±

è¿™ç¯‡æ–‡ç« å°†å¸¦ä½ èµ°è¿›ä¸€ä¸ªè¿·ä½ ä½†å®ç”¨çš„ã€ä»£ç ç”Ÿæˆå·¥ä½œæµç³»ç»Ÿã€‘ï¼Œé€šè¿‡åˆ†å±‚ã€åˆ†æ­¥éª¤åœ°å¼•å¯¼å¤§æ¨¡å‹è¾“å‡ºç»“æ„æ¸…æ™°ã€é£æ ¼ç»Ÿä¸€ã€å¯ç›´æ¥è½åœ°çš„ä»£ç ï¼Œè®©ä½ çš„ AI ç¼–ç¨‹ä½“éªŒä»â€œçŒœè°œæ¸¸æˆâ€å˜æˆâ€œè‡ªåŠ¨æ­å»ºå·¥å‚â€ã€‚

---

## 1 ä¸ºä»€ä¹ˆéœ€è¦å·¥ä½œæµæ¥é©±åŠ¨ä»£ç ç”Ÿæˆï¼Ÿ

### 1.1 â€œå‚»å¤§é»‘ç²—â€çš„ä¸€æ¬¡æ€§ç”Ÿæˆï¼Œé—®é¢˜åœ¨å“ªï¼Ÿ

å½“å‰å¾ˆå¤šä»£ç ç”Ÿæˆè¿‡ç¨‹æ˜¯â€œä¸€æ¬¡å–Šè¯â€ï¼Œæ¯”å¦‚è¾“å…¥ä¸€å¥â€œå†™ä¸€ä¸ªæ–‡ç« ç®¡ç†ç³»ç»Ÿâ€ï¼Œç»“æœæ¨¡å‹ï¼š

- ğŸ”€ éšæœºå†™å‡ºå„ç§é£æ ¼ä¸ä¸€è‡´çš„ä»£ç ï¼›
- ğŸ§± å¿½ç•¥äº†ä½ é¡¹ç›®å·²æœ‰çš„æ¡†æ¶ç»“æ„ï¼›
- ğŸ’£ è¾“å‡ºå‡ åé¡µä»£ç ï¼Œä¸åˆ†å‰åç«¯ã€éš¾ä»¥ä¿®æ”¹ç»´æŠ¤ã€‚

ç”Ÿæˆç»“æœå’Œé¡¹ç›®ä»£ç é£æ ¼å®Œå…¨è„±èŠ‚ï¼Œåªèƒ½å½“â€œå‚è€ƒâ€ã€‚

### 1.2 ç²¾ç»†æ§åˆ¶çš„å¤šæ­¥éª¤ç”Ÿæˆï¼Œæ˜¯ç ´å±€å…³é”®

æœ¬é¡¹ç›®å¼•å…¥äº†ä»¥ä¸‹å…³é”®è®¾è®¡ï¼š

- **ä¸Šä¸‹æ–‡åŠ è½½å™¨**ï¼šé¢„åŠ è½½å·²æœ‰ä»£ç ã€æ¡†æ¶ã€é…ç½®ï¼Œæä¾›â€œç¯å¢ƒæ„ŸçŸ¥â€
- **åˆ†æ­¥éª¤æ‰§è¡Œ**ï¼šä»æ¶æ„åˆ°å‰åç«¯å†åˆ°é…ç½®æ–‡ä»¶ï¼Œé€æ­¥ç”Ÿæˆ
- **å¤šæ¨¡å‹æ”¯æŒ**ï¼šä¸åŒæ¨¡å‹åˆ†å·¥åˆä½œï¼Œæå‡æ•ˆæœä¸æ§åˆ¶åŠ›

æ•ˆæœå¦‚ä¸‹å›¾ï¼ˆå·¥ä½œæµæ‰§è¡Œæ—¥å¿—èŠ‚é€‰ï¼‰ï¼š
æœ¬æ¬¡ç”Ÿæˆå…¨éƒ¨è°ƒç”¨çš„æ˜¯æœ¬åœ°ollamaçš„æ¨¡å‹qwen3:14b(å½“ç²¾ç¡®æ§åˆ¶tokenä¸æ˜¯çº¿ä¸Šå¤§æ¨¡å‹ä¹Ÿä¼šå˜å¾—åŒæ ·ä¼˜ç§€)
ä»£ç ç›®å½•ï¼š
generated_code
ç”Ÿæˆæµç¨‹æ—¥è®°ç›®å½•ï¼š
logs

## 2. è§£å†³æ–¹æ¡ˆï¼šæ„å»ºæ™ºèƒ½ä»£ç ç”Ÿæˆå·¥ä½œæµ

### 2.1 æ•´ä½“æ¶æ„è®¾è®¡

æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆé‡‡ç”¨**åˆ†å±‚å·¥ä½œæµ**çš„è®¾è®¡æ€è·¯ï¼š

```mermaid
graph TD
    A[éœ€æ±‚è¾“å…¥] --> B[ç³»ç»Ÿæ¶æ„è®¾è®¡]
    B --> C[APIæ¥å£å®šä¹‰]
    C --> D[å‰ç«¯ä»£ç ç”Ÿæˆ]
    C --> E[åç«¯ä»£ç ç”Ÿæˆ]
    D --> F[ä»£ç å®¡æŸ¥ä¼˜åŒ–]
    E --> F
    F --> G[å®Œæ•´é¡¹ç›®è¾“å‡º]
```

### 2.2 æ ¸å¿ƒç»„ä»¶ä»‹ç»

#### 2.2.1 å¤šLLMæ”¯æŒä½“ç³»
```python
class LLMProvider(Enum):
    OPENAI = "openai"      # GPT-4ï¼šé€»è¾‘å¤æ‚çš„æ¶æ„è®¾è®¡
    DEEPSEEK = "deepseek"  # DeepSeekï¼šæ€§ä»·æ¯”é«˜çš„ä»£ç ç”Ÿæˆ
    OLLAMA = "ollama"      # æœ¬åœ°æ¨¡å‹ï¼šéšç§å®‰å…¨çš„é€‰æ‹©
```

ä¸åŒçš„ä»»åŠ¡ä½¿ç”¨æœ€é€‚åˆçš„æ¨¡å‹ï¼š
- **æ¶æ„è®¾è®¡**ï¼šä½¿ç”¨DeepSeekçš„å¼ºå¤§æ¨ç†èƒ½åŠ›
- **APIå®šä¹‰**ï¼šä½¿ç”¨GPT-4çš„ç²¾ç¡®é€»è¾‘
- **ä»£ç ç”Ÿæˆ**ï¼šä½¿ç”¨CodeLlamaçš„ä¸“ä¸šç¼–ç¨‹èƒ½åŠ›

#### 2.2.2 æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†
```python
@dataclass
class ContextConfig:
    framework: str           # æŠ€æœ¯æ¡†æ¶
    requirements: str        # å¼€å‘è¦æ±‚
    example_files: List[str] # ç¤ºä¾‹ä»£ç æ–‡ä»¶
    documentation_files: List[str] # æ–‡æ¡£æ–‡ä»¶
```

ç³»ç»Ÿä¼šè‡ªåŠ¨åŠ è½½é¡¹ç›®ç›¸å…³çš„ï¼š
- ğŸ“ **ç¤ºä¾‹ä»£ç **ï¼šè®©AIå­¦ä¹ ä½ çš„ç¼–ç é£æ ¼
- ğŸ“š **æŠ€æœ¯æ–‡æ¡£**ï¼šç¡®ä¿ç”Ÿæˆçš„ä»£ç ç¬¦åˆæ¡†æ¶è§„èŒƒ
- âš™ï¸ **é…ç½®æ–‡ä»¶**ï¼šä¿æŒé¡¹ç›®é…ç½®çš„ä¸€è‡´æ€§

### 2.3 å·¥ä½œæµæ‰§è¡Œå¼•æ“

#### 2.3.1 æ­¥éª¤ä¾èµ–ç®¡ç†
```python
steps:
  - name: "architecture_design"
    depends_on: []  # ç¬¬ä¸€æ­¥ï¼Œæ— ä¾èµ–
    
  - name: "api_definition"  
    depends_on: ["architecture_design"]  # ä¾èµ–æ¶æ„è®¾è®¡
    
  - name: "frontend_generation"
    depends_on: ["api_definition"]  # ä¾èµ–APIå®šä¹‰
```

#### 2.3.2 æ™ºèƒ½è¾“å‡ºæ¸…ç†
```python
class OutputCleaner:
    @staticmethod
    def clean_output(output: str) -> str:
        # ç§»é™¤AIçš„å†…éƒ¨æ€è€ƒè¿‡ç¨‹
        output = re.sub(r'<think>.*?</think>', '', output, flags=re.DOTALL)
        return output.strip()
```

ç¡®ä¿ä¼ é€’ç»™ä¸‹ä¸€æ­¥çš„æ˜¯çº¯å‡€çš„ä¸šåŠ¡ä»£ç ï¼Œè€Œä¸æ˜¯AIçš„"è‡ªè¨€è‡ªè¯­"ã€‚

## 3. å®æˆ˜æ¼”ç¤ºï¼šä»é›¶åˆ°å…¨æ ˆåº”ç”¨

### 3.1 ç¯å¢ƒå‡†å¤‡

#### 3.1.1 å®‰è£…ä¾èµ–
```bash
pip install langchain-openai langchain-ollama langchain-core
pip install pyyaml asyncio
```

#### 3.1.2 é…ç½®LLM
åˆ›å»º `llm_config.yaml`ï¼š
```yaml
llm_configs:
  - name: "deepseek_chat"
    provider: "deepseek"
    model: "deepseek-chat"
    temperature: 0.3
    api_key: "your_api_key"
```

### 3.2 å®šä¹‰å·¥ä½œæµ

#### 3.2.1 ä¸Šä¸‹æ–‡é…ç½®
```yaml
contexts:
  frontend:
    framework: "Vue 3 + iView UI"
    requirements: |
      - ä½¿ç”¨Vue 3 Composition API
      - ä½¿ç”¨iView UIç»„ä»¶åº“
      - æ”¯æŒå“åº”å¼è®¾è®¡
```

#### 3.2.2 æ­¥éª¤é…ç½®
```yaml
steps:
  - name: "architecture_design"
    llm_name: "deepseek_chat"
    prompt_template: |
      ä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„ç³»ç»Ÿæ¶æ„å¸ˆï¼Œè¯·æ ¹æ®ä»¥ä¸‹éœ€æ±‚è®¾è®¡ç³»ç»Ÿæ¶æ„ï¼š
      éœ€æ±‚æè¿°ï¼š{requirement}
      
      è¯·æä¾›ï¼š
      1. ç³»ç»Ÿæ•´ä½“æ¶æ„è®¾è®¡
      2. æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡ï¼ˆåŒ…å«DDLè¯­å¥ï¼‰
      3. æ ¸å¿ƒä¸šåŠ¡æµç¨‹è¯´æ˜
```

### 3.3 æ‰§è¡Œæ•ˆæœå±•ç¤º

#### 3.3.1 å¯åŠ¨å·¥ä½œæµ
```bash
python main.py
```

![å·¥ä½œæµæ‰§è¡Œæ•ˆæœ](https://example.com/workflow-execution.png)

#### 3.3.2 ç”Ÿæˆç»“æœé¢„è§ˆ

**æ¶æ„è®¾è®¡è¾“å‡º**ï¼š
```
ç³»ç»Ÿæ•´ä½“æ¶æ„è®¾è®¡ï¼š
â”œâ”€â”€ å‰ç«¯å±‚ (Vue 3 + iView UI)
â”œâ”€â”€ APIç½‘å…³å±‚ (Spring Boot)
â”œâ”€â”€ ä¸šåŠ¡é€»è¾‘å±‚ (Service)
â”œâ”€â”€ æ•°æ®è®¿é—®å±‚ (MyBatis)
â””â”€â”€ æ•°æ®å­˜å‚¨å±‚ (MySQL)

æ•°æ®åº“è®¾è®¡ï¼š
CREATE TABLE `user` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `email` varchar(100) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

**APIæ¥å£å®šä¹‰**ï¼š
```json
{
  "path": "/api/users",
  "method": "GET",
  "description": "è·å–ç”¨æˆ·åˆ—è¡¨",
  "response": {
    "code": 200,
    "data": [],
    "message": "success"
  }
}
```

### 3.4 ç”Ÿæˆçš„å®Œæ•´ä»£ç ç»“æ„

#### 3.4.1 å‰ç«¯ä»£ç 
```vue
<template>
  <div class="user-management">
    <Table :columns="columns" :data="userList" />
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import { getUserList } from '@/api/user'

const userList = ref([])
const columns = ref([
  { title: 'ID', key: 'id' },
  { title: 'ç”¨æˆ·å', key: 'username' }
])

onMounted(async () => {
  const { data } = await getUserList()
  userList.value = data
})
</script>
```

#### 3.4.2 åç«¯ä»£ç 
```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    @GetMapping
    public Result<List<User>> getUserList() {
        List<User> users = userService.getUserList();
        return Result.success(users);
    }
}
```

## 4. é«˜çº§ç‰¹æ€§ï¼šè®©å·¥ä½œæµæ›´æ™ºèƒ½

### 4.1 åŠ¨æ€æç¤ºè¯ä¼˜åŒ–

#### 4.1.1 ä¸Šä¸‹æ–‡æ„ŸçŸ¥æç¤º
```python
def _build_prompt(self, step_config: StepConfig, input_data: Dict[str, Any]) -> str:
    # æ ¹æ®ä¸Šä¸‹æ–‡åŠ¨æ€è°ƒæ•´æç¤ºè¯
    if step_config.context_type:
        context = self.context_manager.get_context(step_config.context_type)
        input_data["context"] = context
    
    prompt_template = ChatPromptTemplate.from_template(step_config.prompt_template)
    return prompt_template.format(**input_data)
```

#### 4.1.2 æ™ºèƒ½é”™è¯¯æ¢å¤
```python
try:
    result = await self._execute_step(step_config)
except Exception as e:
    # è®°å½•é”™è¯¯å¹¶ç»§ç»­æ‰§è¡Œ
    error_result = StepResult(
        step_name=step_config.name,
        success=False,
        error_message=str(e)
    )
    self.logger.log_step_result(error_result)
```

### 4.2 è´¨é‡ä¿è¯æœºåˆ¶

#### 4.2.1 å¤šè½®ä»£ç å®¡æŸ¥
```yaml
- name: "code_review"
  llm_name: "gpt4_reviewer"
  prompt_template: |
    å¯¹ç”Ÿæˆçš„ä»£ç è¿›è¡Œreviewï¼š
    
    å‰ç«¯ä»£ç ï¼š{frontend_generation}
    åç«¯ä»£ç ï¼š{backend_generation}
    
    è¯·ä»ä»¥ä¸‹ç»´åº¦å®¡æŸ¥ï¼š
    1. ä»£ç è´¨é‡å’Œè§„èŒƒæ€§
    2. æ€§èƒ½ä¼˜åŒ–å»ºè®®
    3. å®‰å…¨æ€§æ£€æŸ¥
```

#### 4.2.2 è¾“å‡ºæ ¼å¼è§„èŒƒåŒ–
```python
class OutputCleaner:
    @staticmethod
    def clean_output(output: str) -> str:
        # ç§»é™¤AIå†…éƒ¨æ€è€ƒæ ‡ç­¾
        output = re.sub(r'<think>.*?</think>', '', output, flags=re.DOTALL)
        # æ¸…ç†å¤šä½™ç©ºç™½
        output = re.sub(r'\n\s*\n\s*\n', '\n\n', output)
        return output.strip()
```

### 4.3 æ‰©å±•æ€§è®¾è®¡

#### 4.3.1 æ’ä»¶åŒ–LLMæ”¯æŒ
```python
class LLMFactory:
    @staticmethod
    def create_llm(config: LLMConfig):
        if config.provider == "custom":
            # æ”¯æŒè‡ªå®šä¹‰LLMæä¾›å•†
            return CustomLLM(config)
        # ... å…¶ä»–æä¾›å•†
```

#### 4.3.2 æ¨¡æ¿åŒ–å·¥ä½œæµ
```yaml
# å¯ä»¥åˆ›å»ºä¸åŒåœºæ™¯çš„å·¥ä½œæµæ¨¡æ¿
template: "microservice"  # å¾®æœåŠ¡æ¶æ„æ¨¡æ¿
template: "monolith"      # å•ä½“åº”ç”¨æ¨¡æ¿
template: "mobile-app"    # ç§»åŠ¨åº”ç”¨æ¨¡æ¿
```

## 5. æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ

### 5.1 æ‰§è¡Œæ•ˆç‡ä¼˜åŒ–

#### 5.1.1 å¹¶å‘æ‰§è¡Œç­–ç•¥
```python
async def execute_parallel_steps(self, independent_steps):
    """å¹¶è¡Œæ‰§è¡Œç‹¬ç«‹çš„æ­¥éª¤"""
    tasks = []
    for step in independent_steps:
        task = asyncio.create_task(self._execute_step(step))
        tasks.append(task)
    
    results = await asyncio.gather(*tasks)
    return results
```

#### 5.1.2 ç¼“å­˜æœºåˆ¶
```python
class CacheManager:
    def __init__(self):
        self.cache = {}
    
    def get_cached_result(self, step_name: str, input_hash: str):
        """è·å–ç¼“å­˜çš„æ‰§è¡Œç»“æœ"""
        cache_key = f"{step_name}_{input_hash}"
        return self.cache.get(cache_key)
```

### 5.2 æˆæœ¬æ§åˆ¶ç­–ç•¥

#### 5.2.1 æ™ºèƒ½æ¨¡å‹é€‰æ‹©
```python
def select_optimal_llm(task_complexity: float, budget_limit: float):
    """æ ¹æ®ä»»åŠ¡å¤æ‚åº¦å’Œé¢„ç®—é€‰æ‹©æœ€ä¼˜æ¨¡å‹"""
    if task_complexity > 0.8 and budget_limit > 0.1:
        return "gpt4"  # å¤æ‚ä»»åŠ¡ç”¨GPT-4
    elif budget_limit < 0.05:
        return "ollama_local"  # é¢„ç®—ç´§å¼ ç”¨æœ¬åœ°æ¨¡å‹
    else:
        return "deepseek"  # å¹³è¡¡é€‰æ‹©
```

#### 5.2.2 Tokenä½¿ç”¨ä¼˜åŒ–
```python
def optimize_prompt_length(prompt: str, max_tokens: int):
    """ä¼˜åŒ–æç¤ºè¯é•¿åº¦ï¼Œæ§åˆ¶æˆæœ¬"""
    if len(prompt.split()) > max_tokens * 0.8:
        # æ™ºèƒ½æˆªæ–­ï¼Œä¿ç•™å…³é”®ä¿¡æ¯
        return smart_truncate(prompt, max_tokens)
    return prompt
```


---

**è®°ä½ï¼šæœ€å¥½çš„ä»£ç ç”Ÿæˆå·¥å…·ï¼Œæ˜¯é‚£ä¸ªçœŸæ­£ä¸ºä½ èŠ‚çœæ—¶é—´ï¼Œæå‡æ•ˆç‡çš„å·¥å…·ã€‚è€Œæœ€å¥½çš„å¼€å§‹æ—¶é—´ï¼Œå°±æ˜¯ç°åœ¨ï¼**

> ğŸ’¡ **å°è´´å£«**ï¼šå¦‚æœä½ åœ¨å®æ–½è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼Œæˆ‘ä»¬ä¸€èµ·æ¢ç´¢AIä»£ç ç”Ÿæˆçš„æ›´å¤šå¯èƒ½æ€§ï¼

---

*æœ¬æ–‡çš„å®Œæ•´ä»£ç ç¤ºä¾‹å·²å¼€æºï¼Œè®¿é—® [GitHubä»“åº“](https://github.com/qyhua0/ai_langchain) ã€‚*