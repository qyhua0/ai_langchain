
# æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºæ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼šåŸºäºLangChainå’ŒOpenAI/DeepSeekçš„å®æˆ˜æ•™ç¨‹

## 1. æ•™ç¨‹æ¦‚è¿°
æœ¬æ•™ç¨‹å°†å¸¦æ‚¨ä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ª**æ™ºèƒ½é—®ç­”åŠ©æ‰‹**ï¼Œä½¿ç”¨LangChainæ¡†æ¶å’ŒOpenAIè¯­è¨€æ¨¡å‹å®ç°è‡ªç„¶è¯­è¨€äº¤äº’ã€‚é€‚åˆAIå…¥é—¨å¼€å‘è€…å’Œå¯¹NLPåº”ç”¨æ„Ÿå…´è¶£çš„è¯»è€…å­¦ä¹ ã€‚

  æ™ºèƒ½é—®ç­”å®ç°æ¶æ„å›¾å¦‚ä¸‹ï¼š
![æ™ºèƒ½é—®ç­”å®ç°æ¶æ„å›¾](2_æ™ºèƒ½é—®ç­”åŠ©æ‰‹.jpg)

## 2. ä¸ºä»€ä¹ˆéœ€è¦é—®ç­”åŠ©æ‰‹ï¼Ÿ
â–Œåœ¨äººå·¥æ™ºèƒ½æ—¶ä»£ï¼Œé—®ç­”ç³»ç»Ÿæ˜¯ï¼š
- æ™ºèƒ½å®¢æœçš„åŸºç¡€ç»„ä»¶ âœ…  
- çŸ¥è¯†ç®¡ç†çš„é«˜æ•ˆå·¥å…· ğŸ’¡  
- å¤æ‚AIç³»ç»Ÿçš„æ ¸å¿ƒæ¨¡å— ğŸ§ 

é€šè¿‡æœ¬æ•™ç¨‹æ‚¨å°†æŒæ¡ï¼š
1. AIé—®ç­”ç³»ç»Ÿçš„åŸºç¡€åŸç†
2. LangChainçš„æ ¸å¿ƒä½¿ç”¨æ–¹æ³•
3. OpenAI/deepseek æ¨¡å‹é›†æˆæŠ€å·§

## 3. æ ¸å¿ƒç»„ä»¶è§£æ
### 3.1 è¯­è¨€æ¨¡å‹
- é‡‡ç”¨OpenAI GPTç³»åˆ—æ¨¡å‹
- æ”¯æŒè‡ªç„¶è¯­è¨€ç†è§£å’Œç”Ÿæˆ
- å‚æ•°è¯´æ˜ï¼š`temperature=0`ä¿è¯ç­”æ¡ˆç¡®å®šæ€§

### 3.2 æç¤ºè¯æ¨¡æ¿
```python
template = """
æ‚¨æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIåŠ©æ‰‹ï¼Œéœ€è¦æ¸…æ™°å‡†ç¡®åœ°å›ç­”ç”¨æˆ·é—®é¢˜

ç”¨æˆ·é—®é¢˜ï¼š{question}

è¯·ç”¨ç®€æ´çš„ä¸­æ–‡å›ç­”ï¼š
"""
```

### 3.3 LLMå¤„ç†é“¾
- è¿æ¥æç¤ºæ¨¡æ¿ä¸è¯­è¨€æ¨¡å‹
- è‡ªåŠ¨å¤„ç†è¾“å…¥è¾“å‡ºè½¬æ¢

## 4. ä¸ƒæ­¥æ­å»ºé—®ç­”ç³»ç»Ÿ
### 4.1 ç¯å¢ƒå‡†å¤‡
#### 4.1.1 å®‰è£…ä¾èµ–åº“
```bash
pip install langchain-openai python-dotenv
```

#### 4.1.2 é…ç½®APIå¯†é’¥
1. åˆ›å»º`.env`æ–‡ä»¶ï¼š
```ini
OPENAI_API_KEY=your_api_key_here
```
2. åŠ è½½ç¯å¢ƒå˜é‡ï¼š
```python
from dotenv import load_dotenv
load_dotenv()
```

### 4.2 åˆå§‹åŒ–è¯­è¨€æ¨¡å‹
```python

from langchain_openai import ChatOpenAI

llm = ChatOpenAI(
    model="gpt-4o-mini",
    max_tokens=1000,
    temperature=0  # æ§åˆ¶å›ç­”åˆ›é€ æ€§
)


```
å¦‚æœè°ƒç”¨çš„æ˜¯deepseekåˆ™ï¼š
```python
llm = ChatOpenAI(
    base_url="https://api.deepseek.com/v1",  # DeepSeek APIç«¯ç‚¹
    model="deepseek-chat",                  # DeepSeekæ¨¡å‹æ ‡è¯†
    openai_api_key="sk-edxxxxxxxxxxxxxxxxxxxx",     # æ›¿æ¢ä¸ºDeepSeekå¯†é’¥
    max_tokens=1000,
    temperature=0
)
```
### 4.3 æ„å»ºæç¤ºæ¨¡æ¿
```python
from langchain.prompts import PromptTemplate

template = """..."""  # è§3.2èŠ‚æ¨¡æ¿
prompt = PromptTemplate.from_template(template)
```

### 4.4 åˆ›å»ºå¤„ç†ç®¡é“
```python
qa_chain = prompt | llm  # ç®¡é“æ“ä½œç¬¦è¿æ¥ç»„ä»¶
```

### 4.5 å®ç°é—®ç­”å‡½æ•°
```python
def get_answer(question):
    response = qa_chain.invoke({"question": question})
    return response.content
```

### 4.6 æµ‹è¯•é—®ç­”æ•ˆæœ
```python
# ç¤ºä¾‹é—®é¢˜æµ‹è¯•
test_question = "æ³•å›½çš„é¦–éƒ½æ˜¯å“ªé‡Œï¼Ÿ"
print(f"ç­”æ¡ˆï¼š{get_answer(test_question)}")

# è¾“å‡ºç»“æœï¼š
# ç­”æ¡ˆï¼šæ³•å›½çš„é¦–éƒ½æ˜¯å·´é»ã€‚
```

### 4.7 å®ç°äº¤äº’ç•Œé¢
```python
while True:
    user_input = input("\nè¯·è¾“å…¥é—®é¢˜ï¼ˆè¾“å…¥qé€€å‡ºï¼‰:")
    if user_input.lower() == 'q':
        break
    print(f"AIåŠ©æ‰‹ï¼š{get_answer(user_input)}")
```

å®ç°æ•ˆæœå›¾å¦‚ä¸‹ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/e031592439164fea8f5e660694220b67.png)

## 5. æ•ˆæœä¼˜åŒ–å»ºè®®
### 5.1 æ‰©å±•åŠŸèƒ½
1. ä¸Šä¸‹æ–‡è®°å¿† ğŸ”„
   ```python
   from langchain.memory import ConversationBufferMemory
   ```
2. çŸ¥è¯†åº“å¢å¼º ğŸ“š
   ```python
   from langchain.retrievers import WikipediaRetriever
   ```

### 5.2 æ€§èƒ½ä¼˜åŒ–
- å¢åŠ æµå¼å“åº” ğŸš€
- æ·»åŠ ç¼“å­˜æœºåˆ¶ ğŸ’¾
- å®ç°å¼‚æ­¥å¤„ç† âš¡

## 6. å¸¸è§é—®é¢˜è§£ç­”
### 6.1 å¦‚ä½•æé«˜å›ç­”è´¨é‡ï¼Ÿ
- ä¼˜åŒ–æç¤ºè¯æ¨¡æ¿
- è°ƒæ•´temperatureå‚æ•°
- æ·»åŠ ç¤ºä¾‹å¯¹è¯

### 6.2 é‡åˆ°APIé™æµæ€ä¹ˆåŠï¼Ÿ
- å®ç°è¯·æ±‚é‡è¯•æœºåˆ¶
- ä½¿ç”¨æŒ‡æ•°é€€é¿ç®—æ³•
